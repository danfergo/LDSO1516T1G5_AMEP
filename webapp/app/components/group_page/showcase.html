<!--<div style="position:relative;">
  <md-button class="md-fab"
             ng-if="currentSession.id && currentProssumerState && currentProssumerState.state == 2"
             aria-label="Adesão pendente"
             ng-click="openCycleProductsManagement($event)"
             style="position:absolute;top:-36px; right:7%;">
    <ng-md-icon icon="add_to_photos"></ng-md-icon>
  </md-button>
</div> -->
<div ng-if="!currentCycle" style="font-size:32px; color:#999; text-align:center; max-width:700px;margin:50px auto;">
  Nenhum ciclo se encontra ativo,
  consulta o separador ciclos para saberes mais acerca dos últimos.
</div>


<div layout="row" ng-if="currentCycle">




  <div layout="row" class="page-wrapper" flex layout-wrap layout-align="space-between stretch">

    <div flex="100" ng-if="Group.Prossumer.isActive(prossumerState)">
      <div layout-padding layout="row">
        <span flex></span>
        <md-switch style="margin-bottom:5px;"
                   ng-model="showOnlyMyProducts"
                   class="md-warn"
                   aria-label="Enable Indicators">
          Mostrar apenas os meus produtos
        </md-switch>
      </div>
      <div ng-if="cycleShowcaseProducts.length == 0 && filteredShowcaseProducts().length == 0" style="font-size:32px; color:#999; text-align:center; max-width:700px;margin:50px auto;">
        Ainda não inseriste nenhum dos teus produtos neste próximo ciclo.
      </div>
    </div>

    <div ng-repeat="product in filteredShowcaseProducts()"
         class="flip-container" flip-card flex="50" flex-gt-lg="33" layout="column">
      <div class="flipper" flex layout="column">
        <div class="front" layout="column" flex>
          <md-whiteframe class="md-whiteframe-2dp" style="background:#fff;" flex layout-margin>
            <div ng-if="false" style="padding:5px">
              <div>
                <h3 style="margin:0" class="md-title">
                  <md-input-container>
                    <label>Title</label>
                    <input ng-model="user.title">
                  </md-input-container>
                </h3>
                <md-input-container flex><label>Descrição</label>
        <textarea ng-model="product.description" columns="1" md-maxlength="300"
                  placeholder="Descreve  o produto"></textarea>
                </md-input-container>
              </div>

              <div ng-if="$index % 4 != 3"
                   style="background-image:url('http://a3145z1.americdn.com/wp-content/uploads/2013/03/orange-king-of-fruits.jpg');
                      background-size:cover;
                      background-position:center center;
                      height:150px;">
              </div>
              <!-- <div class="text-right" layout="row">
                <div flex></div>
                <md-input-container style="padding:0" flex><label>Ecos</label>
                  <input ng-model="product.ecos" ng-required="true" type="number" class="input-ecos" step="0.01"
                         min="0" max="99999"
                         ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/">
                </md-input-container>
                <md-input-container style="padding:0" flex><label>Euros</label>
                  <input ng-model="product.ecos" ng-required="true" type="number" class="input-ecos" step="0.01"
                         min="0" max="99999"
                         ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/">
                </md-input-container>
              </div>-->

              <div layout="row">
                <md-input-container flex="50">
                  <label>Categoria</label>
                  <md-select ng-model="category">
                    <md-option ng-repeat="productCategory in productCategories" ng-value="productCategory">
                      {{productCategory.name}}
                    </md-option>
                  </md-select>
                </md-input-container>
                <md-input-container flex="50"><label>Unidade</label>
                  <input ng-model="product.unit" ng-required="true" type="text">
                </md-input-container>
              </div>
            </div>

            <div ng-if="true">
              <div layout-padding>
                <div layout="row">
                  <h3 class="md-title" flex>{{product.title}}</h3>
                  <md-button class="md-icon-button toggle" aria-label="Reverse" style="margin-top:5px;color:#555">
                    <ng-md-icon icon="rotate_left" size="24"></ng-md-icon>
                  </md-button>
                </div>

                <p>{{product.description}}</p>
              </div>
              <div ng-if="$index % 4 != 3"
                   style="background-image:url('http://a3145z1.americdn.com/wp-content/uploads/2013/03/orange-king-of-fruits.jpg');
                      background-size:cover;
                      background-position:center center;
                      height:150px;">
              </div>
              <div layout-margin class="text-right">
                <b>{{ product.weeks[0].stock.unit_price_ecos | currency :'E':2}}</b> +
                {{ product.weeks[0].stock.unit_price_euros | currency :'€':2}}<br> /
                {{product.unit}}
              </div>
              <div layout-margin>
                <span class="number-chip">1 </span>
              </div>
            </div>
          </md-whiteframe>
        </div>
        <div class="back" layout="column">
          <div class="md-whiteframe-2dp" style="background:#fff;" flex layout-padding layout-margin>
            <div layout="row">
              <h3 class="md-title" flex>{{product.title}}</h3>
              <md-button class="md-icon-button toggle" aria-label="Reverse" style="margin-top:5px;color:#555">
                <ng-md-icon icon="rotate_right" size="24"></ng-md-icon>
              </md-button>
            </div>
            <div layout-margin class="text-right">
              <b>{{ product.weeks[0].stock.unit_price_ecos | currency :'E':2}}</b> +
              {{ product.weeks[0].stock.unit_price_euros | currency :'€':2}}<br> /
              {{product.unit}}
            </div>
            <div ng-repeat="week in product.weeks">
              <md-divider></md-divider>

              <div layout="row" style="margin: 5px 0">
                <div flex style="padding:1px;line-height:26px;">
                  {{week.delivery_date | date:'dd/MM'}}
                </div>
                <input  ng-if="$scope.currentCycleState == 'supplying'" value="0" style="width:40px;padding-left: 3px;
                border:2px solid rgba(0,0,0,0.54); border-radius:2px;outline: none;
                margin: 0 1px;" type="number" step="1" min="0" max="30">

                <div style="padding:1px 5px;line-height:26px;" flex class="text-right">
                  <small><i>(até {{week.stock.quantity}} {{product.unit}})</i></small>
                </div>
              </div>
            </div>

            <div layout="row" ng-if="$scope.currentCycleState == 'supplying'"  style="padding-top:20px;">
              <md-divider></md-divider>
              <div flex style="line-height:40px;">
                <b>{{ 123 | currency :'E':2}}</b> + {{ 123 | currency :'€':2}}<br>
              </div>
              <div>
                <md-button style="margin:2px 0"
                           class="md-primary md-raised md-mini" aria-label="Encomendar"> Encomendar
                </md-button>
              </div>
            </div>
            </md-whiteframe>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div layout="column" style="width:300px;max-width:20%" layout-margin>
    <div ng-if="Group.Prossumer.isActive(prossumerState)" style="height:40px"></div>
    <div ng-if="Group.Prossumer.isActive(prossumerState)">
      <md-list>
        <h4 style="padding-left:20px;">Meus produtos</h4>

        <p style="padding-left:20px;margin-top:-10px;font-size:12px;"><i>(a incluir neste próximo ciclo)</i></p>

        <md-list-item class="md-1-line" ng-repeat="product in prossumerProducts">
          <div class="md-list-item-text" layout="row">
            <md-checkbox ng-change="changeProssumerProductInCycle($index)"
                         ng-model="prossumerProductsInCycle[$index]"
                         class="md-warn">
              <b>{{product.title}}</b>
            </md-checkbox>
          </div>
        </md-list-item>
        <md-list-item ng-click="addOrEditProduct()">
          <md-item-content md-ink-ripple aria-label="Reverse">
              <b><ng-md-icon icon="add" size="24" style="padding:0 5px;"></ng-md-icon>
               &nbsp; Novo</b>
          </md-item-content>
        </md-list-item>
      </md-list>
    </div>

    <md-divider ng-if="Group.Prossumer.isActive(prossumerState)"></md-divider>

    <md-list>
      <h4 style="padding-left:20px;">Filtrar categorias</h4>
      <md-list-item class="md-1-line" ng-repeat="productCategory in productCategories">
        <div class="md-list-item-text" layout="row">
          <md-checkbox class="md-warn">
            <b>{{productCategory.name}}</b>
          </md-checkbox>
        </div>
      </md-list-item>
    </md-list>
  </div>


</div>
